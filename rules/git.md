# Git運用ルール

## 1. .gitignore運用

### 必ずignoreするもの

- 依存関係: `node_modules/`
- ビルド成果物: `dist/`, `build/`, `.next/`, `out/`
- 環境変数・シークレット: `.env`, `.env.local`, `.env*.local`
- ログファイル: `*.log`, `logs/`
- OS生成ファイル: `.DS_Store`, `Thumbs.db`
- IDE設定: `.idea/`, `.vscode/` (共有設定除く)
- キャッシュ: `.cache/`, `.turbo/`, `.eslintcache`
- テストカバレッジ: `coverage/`
- 一時ファイル: `*.tmp`, `*.temp`, `*.swp`

### 注意事項

- シークレット情報は絶対にコミットしない
- 新しいツール導入時は関連ファイルのignore追加を確認
- モノレポでは各パッケージの成果物も考慮

## 2. コミットルール

### メッセージ形式

```
<type>: <メッセージ（日本語100文字以内）>
```

### Type一覧

| Type | 用途 |
|------|------|
| `feat` | 新機能追加 |
| `fix` | バグ修正 |
| `refactor` | リファクタリング（機能変更なし） |
| `hotfix` | 緊急バグ修正 |
| `docs` | ドキュメントのみの変更 |
| `style` | コードスタイル変更（フォーマット等） |
| `test` | テストの追加・修正 |
| `chore` | ビルド・設定等の雑務 |
| `perf` | パフォーマンス改善 |

### コミットタイミング

- 作業の区切りごとにコミット
- サービス全体が動作する状態でコミット
- 型エラーやビルドエラーがある状態ではコミットしない
- 1コミット = 1つの論理的な変更

### 例

```
feat: ユーザー認証機能を追加
fix: ログイン時のセッション切れを修正
refactor: 認証ロジックをサービス層に分離
```

## 3. ブランチルール

### ブランチ戦略

- `main`: 本番環境用、常にデプロイ可能な状態
- `develop`: 開発用統合ブランチ（必要に応じて）
- `feature/*`: 機能開発用
- `fix/*`: バグ修正用
- `hotfix/*`: 緊急修正用

### 作業フロー

1. 最新の`main`（または`develop`）からブランチを切る
2. 機能実装・テスト
3. プッシュしてPR作成（`gh pr create`）
4. レビュー後マージ

### ブランチ命名

```
feature/機能名
fix/修正内容
hotfix/緊急修正内容
```

例: `feature/user-authentication`, `fix/login-session-bug`

## 4. その他の注意事項

### プルリクエスト

- PRは小さく保つ（レビューしやすいサイズ）
- 説明文に変更内容と背景を記載
- 関連するIssueがあればリンク

### マージ

- マージ前に最新のベースブランチを取り込む
- コンフリクトは慎重に解決

### 履歴管理

- `git rebase`は共有ブランチでは使わない
- force pushは原則禁止（個人ブランチのみ許可）
